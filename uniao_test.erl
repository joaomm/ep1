-module (uniao_test).
-include_lib("eunit/include/eunit.hrl").

uniao_nao_grudados_test() ->
	[
		?assertEqual(uniao:recursiva([{0, 1},{1, 0}], [{2, 1}, {3, 0}]), [{0, 1}, {1, 0}, {2, 1}, {3, 0}]),
		?assertEqual(uniao:recursiva([{0, 1},{1, 0}], [{3, 1}, {4, 0}]), [{0, 1}, {1, 0}, {3, 1}, {4, 0}])
	].

uniao_grudados_e_mesma_altura_test() ->
	[
		?assertEqual(uniao:recursiva([{0, 1},{1, 0}], [{1, 1}, {2, 0}]), [{0, 1}, {2, 0}]),
		?assertEqual(uniao:recursiva([{0, 2},{1, 0}], [{1, 2}, {2, 0}]), [{0, 2}, {2, 0}]),
		?assertEqual(uniao:recursiva([{0, 2},{1, 0}], [{1, 2}, {3, 0}]), [{0, 2}, {3, 0}]),
		?assertEqual(uniao:recursiva([{1, 2},{2, 0}], [{2, 2}, {3, 0}]), [{1, 2}, {3, 0}]),
		?assertEqual(uniao:recursiva([{0, 2},{2, 0}], [{2, 2}, {3, 0}]), [{0, 2}, {3, 0}]),
		?assertEqual(uniao:recursiva([{2, 2}, {3, 0}], [{0, 2},{2, 0}]), [{0, 2}, {3, 0}])
	].

uniao_grudados_com_alturas_diferentes_test() ->
	[
		?assertEqual(uniao:recursiva([{0, 1}, {1, 0}], [{1, 2}, {2, 0}]), [{0, 1}, {1, 2}, {2, 0}]),
		?assertEqual(uniao:recursiva([{0, 3}, {1, 0}], [{1, 2}, {2, 0}]), [{0, 3}, {1, 2}, {2, 0}])
	].

uniao_com_sobreposicao_total_test() ->
	[
		?assertEqual(uniao:recursiva([{0, 2}, {3, 0}], [{1, 1}, {2, 0}]), [{0, 2}, {3, 0}]),
		?assertEqual(uniao:recursiva([{1, 1}, {2, 0}], [{0, 2}, {3, 0}]), [{0, 2}, {3, 0}])
	].
	
uniao_de_sobreposicao_com_ordem_importando_test() ->
	[
		?assertEqual(uniao:recursiva([{1,1}, {2,0}, {3,1}, {4,0}], [{2,2}, {5, 0}]), [{1,1}, {2,2}, {5,0}])
	].
	
uniao_de_identicos_test() ->
	[
		?assertEqual(uniao:recursiva([{1,2}, {2,0}], [{1,2}, {2,0}]), [{1,2}, {2,0}])
	].

uniao_com_descida_test() ->
	[
		?assertEqual(uniao:recursiva([{0,2}, {2,0}], [{0,1}, {3,0}]), [{0,2}, {2,1}, {3,0}]),
		?assertEqual(uniao:recursiva([{0,1}, {5,0}], [{1,3}, {2,0}, {3,2}, {4,0}]), [{0,1},{1,3},{2,1},{3,2},{4,1},{5,0}]),
		?assertEqual(uniao:recursiva([{1,3}, {2,0}, {3,2}, {4,0}], [{0,1}, {5,0}]), [{0,1},{1,3},{2,1},{3,2},{4,1},{5,0}]),
		?assertEqual(uniao:recursiva([{1,4}, {2,1}, {3,3}, {4,0}], [{0,2}, {5,0}]), [{0,2},{1,4},{2,2},{3,3},{4,2},{5,0}])
	].
	
uniao_master_test() ->
	[
		?assertEqual(uniao:recursiva([{1,11}, {3,13}, {9,0}], [{2,6}, {7,0}]), [{1,11}, {3,13}, {9,0}]),
		?assertEqual(uniao:recursiva([{1,11}, {3,13}, {9,0}, {14, 3}, {23,13}, {29,0}], 
									[{2,6}, {7,0}, {12, 7}, {16,0}]),
									[{1,11}, {3,13}, {9,0}, {12,7}, {16,3}, {23,13}, {29,0}]),
		?assertEqual(uniao:recursiva([{1,11}, {3,13}, {9,0}, {14, 3}, {23,13}, {29,0}],
									[{2,6}, {7,0}, {12, 7}, {16,0}, {19,18}, {22, 0}, {24,4}, {27,0}]),
									[{1,11}, {3,13}, {9,0}, {12,7}, {16,3}, {19,18}, {22,3}, {23,13}, {29,0}]),
   		?assertEqual(uniao:recursiva([{1,11}, {3,13}, {9,0}, {14, 3}, {23,13}, {29,0}],
   									[{2,6}, {7,0}, {12, 7}, {16,0}, {19,18}, {22, 0}, {23,3}, {24,4}, {27,0}]),
   									[{1,11}, {3,13}, {9,0}, {12,7}, {16,3}, {19,18}, {22,3}, {23,13}, {29,0}])
	].

uniao_enunciado_test() ->
	[
		?assertEqual(uniao:recursiva([{12,4},{16,17},{19,14},{22,9},{27,0}],
									[{14,6}, {18,16}, {20, 11}, {23, 5}, {25,0}]),
									[{12,4}, {14,6}, {16, 17}, {19, 16}, {20, 14}, {22, 11}, {23, 9}, {27,0}]),

		?assertEqual(uniao:recursiva([{3,6},{7,2},{8,9},{12,4},{16,17},{19,14},{22,9},{27,0}],
									[{5,4}, {9,13}, {14,6}, {18,16}, {20, 11}, {23, 5}, {25,0}]),
									[{3,6}, {7,4}, {8,9}, {9,13}, {14,6}, {16, 17}, {19, 16}, {20, 14}, {22, 11}, {23, 9}, {27,0}]),
									
		?assertEqual(uniao:recursiva([{5,4}, {9,13}, {14,6}, {18,16}, {20, 11}, {23, 5}, {25,0}],
									[{3,6},{7,2},{8,9},{12,4},{16,17},{19,14},{22,9},{27,0}]),
									[{3,6}, {7,4}, {8,9}, {9,13}, {14,6}, {16, 17}, {19, 16}, {20, 14}, {22, 11}, {23, 9}, {27,0}])
	].